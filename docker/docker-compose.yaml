version: "2"

networks: 
  test:
    

services: 
  db-org1:
    image: mongo:latest
    container_name: db-org1
    environment:
      - MONGO_INITDB_DATABASE=reporting
    volumes:
      - ./init-mongo.js:/docker-entrypoint-initdb.d/init-mongo.js:ro
      - ./mongo-volume:/data/db
    ports:
      - "27017-27019:27017-27019"
    networks:
      - test

  reporting-org1:
    build:
      context: ../minor
      dockerfile: Dockerfile
    env_file: .env
    ports: 
      - "3000:3000"
    container_name: reporting-org1
    depends_on:
      - db-org1
    networks: 
      - test        
